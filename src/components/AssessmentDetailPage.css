.cei-assessment-detail-shell {
  width: min(1240px, 100%);
  margin: 0 auto;
  min-height: 100vh;
  padding: var(--space-8) var(--space-6);
  display: grid;
  gap: var(--space-5);
}

.cei-assessment-detail-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: var(--space-4);
}

.cei-assessment-detail-header-main {
  display: grid;
  gap: var(--space-2);
}

.cei-assessment-detail-header-actions {
  display: grid;
  gap: var(--space-3);
  justify-items: end;
}

.cei-assessment-link-button {
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  background-color: transparent;
  color: var(--text-muted);
  cursor: pointer;
  padding: var(--space-2) var(--space-3);
  justify-self: start;
}

.cei-assessment-link-button:hover {
  color: var(--text-primary);
  border-color: rgba(173, 193, 229, 0.44);
}

.cei-assessment-detail-kicker {
  margin: 0;
  text-transform: uppercase;
  letter-spacing: 0.11em;
  color: var(--text-muted);
  font-size: 0.76rem;
}

.cei-assessment-detail-title {
  margin: 0;
  font-size: 1.8rem;
}

.cei-assessment-detail-subtitle {
  margin: 0;
  color: var(--text-muted);
}

.cei-button-primary,
.cei-button-secondary {
  border-radius: var(--radius-md);
  font-weight: 600;
  padding: var(--space-2) var(--space-4);
  cursor: pointer;
}

.cei-button-primary {
  border: 0;
  background-color: var(--accent);
  color: var(--bg-primary);
  font-weight: 700;
}

.cei-button-secondary {
  border: 1px solid var(--border);
  background-color: transparent;
  color: var(--text-primary);
}

.cei-button-primary:disabled,
.cei-button-secondary:disabled {
  cursor: not-allowed;
  opacity: 0.65;
}

.cei-assessment-detail-loading,
.cei-assessment-detail-error {
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  background-color: rgba(15, 26, 48, 0.82);
  min-height: 180px;
  display: grid;
  place-items: center;
  padding: var(--space-6);
}

.cei-assessment-detail-error {
  color: var(--danger);
}

.cei-summary-grid {
  display: grid;
  grid-template-columns: repeat(5, minmax(0, 1fr));
  gap: var(--space-3);
}

.cei-approval-action-bar {
  border: 1px solid rgba(121, 255, 197, 0.36);
  border-radius: var(--radius-lg);
  background: linear-gradient(160deg, rgba(27, 56, 44, 0.9), rgba(12, 22, 40, 0.95));
  padding: var(--space-4);
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: var(--space-4);
}

.cei-approval-action-copy h2 {
  margin: 0 0 var(--space-1);
  font-size: 1.05rem;
}

.cei-approval-action-copy p {
  margin: 0;
  color: var(--text-muted);
}

.cei-approval-action-buttons {
  display: flex;
  gap: var(--space-3);
  flex-wrap: wrap;
}

.cei-approval-button {
  border: 0;
  border-radius: var(--radius-md);
  font-weight: 700;
  padding: var(--space-2) var(--space-4);
  cursor: pointer;
  color: var(--bg-primary);
}

.cei-approval-button-approve {
  background-color: #7dffbd;
}

.cei-approval-button-reject {
  background-color: #ff8aa8;
}

.cei-workflow-badge-row {
  display: flex;
}

.cei-workflow-badge {
  display: inline-flex;
  align-items: center;
  border-radius: 999px;
  border: 1px solid transparent;
  padding: var(--space-2) var(--space-3);
  font-size: 0.8rem;
  font-weight: 700;
  letter-spacing: 0.04em;
  text-transform: uppercase;
}

.cei-workflow-badge-approved {
  background-color: rgba(133, 107, 199, 0.28);
  border-color: rgba(204, 177, 255, 0.4);
  color: #ecdfff;
}

.cei-workflow-badge-sent-back {
  background-color: rgba(75, 116, 168, 0.3);
  border-color: rgba(105, 166, 255, 0.38);
  color: #d7ebff;
}

.cei-summary-card {
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  background-color: rgba(15, 26, 48, 0.86);
  padding: var(--space-4);
}

.cei-summary-card-mapped {
  border-color: rgba(133, 245, 167, 0.48);
  background: linear-gradient(160deg, rgba(56, 144, 77, 0.35), rgba(15, 26, 48, 0.9));
}

.cei-summary-card-partial {
  border-color: rgba(255, 213, 125, 0.48);
  background: linear-gradient(160deg, rgba(166, 120, 23, 0.32), rgba(15, 26, 48, 0.92));
}

.cei-summary-card-gap {
  border-color: rgba(255, 125, 158, 0.48);
  background: linear-gradient(160deg, rgba(170, 45, 79, 0.28), rgba(15, 26, 48, 0.92));
}

.cei-summary-label {
  margin-top: 0;
  margin-bottom: var(--space-2);
  color: var(--text-muted);
  font-size: 0.8rem;
  text-transform: uppercase;
  letter-spacing: 0.06em;
}

.cei-summary-value {
  margin: 0;
  font-size: 1.4rem;
  font-weight: 700;
}

.cei-assessment-panel {
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  background-color: rgba(15, 26, 48, 0.9);
  box-shadow: var(--shadow-panel);
  padding: var(--space-5);
  display: grid;
  gap: var(--space-4);
}

.cei-assessment-panel-header {
  display: flex;
  justify-content: space-between;
  align-items: baseline;
  gap: var(--space-3);
}

.cei-assessment-panel-header h2 {
  margin: 0;
  font-size: 1.1rem;
}

.cei-assessment-panel-header p {
  margin: 0;
  color: var(--text-muted);
}

.cei-assessment-chart-wrap {
  height: 280px;
}

.cei-filter-grid {
  display: grid;
  grid-template-columns: repeat(4, minmax(0, 1fr));
  gap: var(--space-3);
}

.cei-filter-label {
  display: grid;
  gap: var(--space-2);
  color: var(--text-muted);
  font-size: 0.84rem;
}

.cei-filter-label select,
.cei-filter-label input {
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  background-color: rgba(11, 21, 38, 0.92);
  color: var(--text-primary);
  padding: var(--space-2) var(--space-3);
}

.cei-assessment-table-wrap {
  border: 1px solid var(--table-border);
  border-radius: var(--radius-md);
  overflow: auto;
}

.cei-assessment-table {
  width: 100%;
  border-collapse: collapse;
  min-width: 920px;
}

.cei-assessment-table th,
.cei-assessment-table td {
  padding: var(--space-3);
  border-bottom: 1px solid var(--table-border);
  text-align: left;
}

.cei-assessment-table th {
  background-color: var(--table-header-bg);
}

.cei-table-sort-button {
  border: 0;
  width: 100%;
  background: transparent;
  color: var(--table-header-text);
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: var(--space-2);
  text-align: left;
  cursor: pointer;
}

.cei-assessment-table-row {
  cursor: pointer;
}

.cei-assessment-table-row:hover {
  background-color: rgba(79, 179, 255, 0.11);
}

.cei-assessment-table-row-selected {
  background-color: rgba(121, 255, 197, 0.1);
}

.cei-mapping-status {
  display: inline-flex;
  align-items: center;
  border-radius: 999px;
  font-size: 0.74rem;
  font-weight: 700;
  letter-spacing: 0.05em;
  text-transform: uppercase;
  border: 1px solid transparent;
  padding: 3px 10px;
}

.cei-mapping-status-mapped {
  color: #bcf5d2;
  background-color: rgba(82, 196, 116, 0.2);
  border-color: rgba(133, 245, 167, 0.38);
}

.cei-mapping-status-partial {
  color: #ffe5a8;
  background-color: rgba(255, 196, 92, 0.2);
  border-color: rgba(255, 215, 143, 0.36);
}

.cei-mapping-status-gap {
  color: #ffd0dc;
  background-color: rgba(255, 125, 158, 0.2);
  border-color: rgba(255, 163, 186, 0.34);
}

.cei-pagination-row {
  display: flex;
  justify-content: flex-end;
  align-items: center;
  gap: var(--space-3);
}

.cei-pagination-row p {
  margin: 0;
  color: var(--text-muted);
}

.cei-detail-grid {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: var(--space-3);
}

.cei-detail-card {
  border: 1px solid var(--table-border);
  border-radius: var(--radius-md);
  background-color: rgba(8, 15, 28, 0.6);
  padding: var(--space-4);
}

.cei-detail-card h3 {
  margin-top: 0;
  margin-bottom: var(--space-2);
  font-size: 1rem;
}

.cei-detail-card p {
  margin-top: 0;
  margin-bottom: var(--space-2);
  color: var(--text-primary);
}

.cei-detail-definition-list {
  margin: 0;
  display: grid;
  gap: var(--space-2);
}

.cei-detail-definition-list div {
  display: grid;
  gap: var(--space-1);
}

.cei-detail-definition-list dt {
  font-size: 0.78rem;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.06em;
}

.cei-detail-definition-list dd {
  margin: 0;
}

.cei-user-override-badge {
  display: inline-flex;
  align-items: center;
  border-radius: 999px;
  background-color: rgba(160, 110, 255, 0.24);
  border: 1px solid rgba(195, 149, 255, 0.4);
  color: #ecdfff;
  font-size: 0.76rem;
  font-weight: 700;
  letter-spacing: 0.05em;
  text-transform: uppercase;
  padding: 4px 10px;
}

.cei-refinement-panel {
  margin-top: var(--space-4);
  border: 1px solid rgba(122, 160, 220, 0.34);
  border-radius: var(--radius-md);
  background-color: rgba(7, 13, 24, 0.78);
  padding: var(--space-4);
  display: grid;
  gap: var(--space-3);
}

.cei-refinement-header {
  display: flex;
  align-items: baseline;
  justify-content: space-between;
  gap: var(--space-3);
}

.cei-refinement-header h3 {
  margin: 0;
  font-size: 1rem;
}

.cei-refinement-unsaved {
  margin: 0;
  color: var(--warning);
  font-size: 0.82rem;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.cei-refinement-grid {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: var(--space-3);
}

.cei-refinement-field {
  display: grid;
  gap: var(--space-2);
  color: var(--text-muted);
  font-size: 0.84rem;
}

.cei-refinement-field input,
.cei-refinement-field select,
.cei-refinement-field textarea {
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  background-color: rgba(10, 18, 34, 0.86);
  color: var(--text-primary);
  padding: var(--space-2) var(--space-3);
}

.cei-refinement-field input[type='range'] {
  padding: 0;
}

.cei-refinement-field-changed {
  color: #cde8ff;
}

.cei-refinement-field-changed input,
.cei-refinement-field-changed select,
.cei-refinement-field-changed textarea {
  border-color: rgba(121, 255, 197, 0.62);
  box-shadow: 0 0 0 1px rgba(121, 255, 197, 0.26);
}

.cei-refinement-validation {
  margin: 0;
  color: var(--danger);
  font-size: 0.84rem;
}

.cei-refinement-actions {
  display: flex;
  gap: var(--space-3);
  justify-content: flex-end;
}

.cei-panel-empty {
  margin: 0;
  color: var(--text-muted);
}

@media (max-width: 1100px) {
  .cei-summary-grid {
    grid-template-columns: repeat(3, minmax(0, 1fr));
  }

  .cei-filter-grid {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
}

@media (max-width: 768px) {
  .cei-assessment-detail-shell {
    padding: var(--space-5) var(--space-4);
  }

  .cei-assessment-detail-header {
    flex-direction: column;
  }

  .cei-assessment-detail-header-actions {
    width: 100%;
    justify-items: stretch;
  }

  .cei-summary-grid,
  .cei-filter-grid,
  .cei-detail-grid,
  .cei-refinement-grid {
    grid-template-columns: 1fr;
  }

  .cei-pagination-row {
    justify-content: space-between;
  }

  .cei-approval-action-bar {
    flex-direction: column;
    align-items: stretch;
  }

  .cei-refinement-actions {
    justify-content: stretch;
  }

  .cei-refinement-actions .cei-button-primary,
  .cei-refinement-actions .cei-button-secondary {
    flex: 1;
  }
}
